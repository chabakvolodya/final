<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">

    <property name="pathToDataV1.0.0" value="liquibase/version_1.0.0/populate-data/"/>


    <changeSet id="OrderDetail-addColumns" author="Sasha">
        <addColumn tableName="order_detail">
            <column name="cook_employee_id" type="INTEGER">
                <constraints nullable="true" foreignKeyName="fk_OrderDetail_Employee"
                             references="employee(id)"/>
            </column>
            <column name="prepare_date" type="DATETIME">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="Update-data-in-OrderDetail" author="Sasha">
        <loadUpdateData tableName="order_detail" primaryKey="id"
                        file="${pathToDataV1.0.0}new_order_detail.csv">
            <column name="cook_employee_id" type="NUMERIC"/>
            <column name="prepare_date" type="DATE"/>
        </loadUpdateData>

        <rollback>
            <dropColumn tableName="order_detail" columnName="cook_employee_id"/>
            <dropColumn tableName="order_detail" columnName="prepare_date"/>
            <addColumn tableName="order_detail">
                <column name="cook_employee_id" type="INTEGER">
                    <constraints nullable="true" foreignKeyName="fk_OrderDetail_Employee"
                                 references="employee(id)"/>
                </column>
                <column name="prepare_date" type="DATETIME">
                    <constraints nullable="true"/>
                </column>
            </addColumn>
        </rollback>
    </changeSet>


    <changeSet id="Drop-table-PreparedDish" author="Sasha">
        <dropTable tableName="prepared_dish"/>
        <!--<rollback changeSetId="13 Create PreparedDish" changeSetAuthor="Sasha" changeSetPath="src/main/resources/liquibase/initialize/changelog-createDB.xml"/>-->
        <!--<rollback changeSetId="13 populate prepared_dish" changeSetAuthor="Sasha" changeSetPath="src/main/resources/liquibase/initialize/changelog-populateDB.xml"/>-->
        <rollback/>
    </changeSet>

    <changeSet id="dropPrimaryKey-from-dish_ingredient" author="Sasha">
        <dropPrimaryKey tableName="dish_ingredient"/>

        <rollback/>
    </changeSet>

    <changeSet id="addPrimaryKey-to-dish_ingredient" author="Sasha">
        <addPrimaryKey columnNames="dish_id, ingredient_id"
                       constraintName="pk_dish_ingredient"
                       tableName="dish_ingredient"/>
        <rollback/>
    </changeSet>

    <changeSet id="dropColumn-id-from-dish_ingredient" author="Sasha">
        <dropColumn columnName="id"
                    tableName="dish_ingredient"/>
        <rollback/>
    </changeSet>

    <changeSet id="dropPrimaryKey-from-order_detail" author="Sasha">
        <dropPrimaryKey tableName="order_detail"/>
        <addPrimaryKey columnNames="order_id, dish_id"
                       constraintName="pk_order_dish"
                       tableName="order_detail"/>
        <dropColumn tableName="order_detail" columnName="id"/>
        <rollback/>
    </changeSet>

    <changeSet id="dropPrimaryKey-from-menu_detail" author="Sasha">
        <dropPrimaryKey tableName="menu_detail"/>
        <addPrimaryKey columnNames="menu_id, dish_id"
                       constraintName="pk_menu_detail"
                       tableName="menu_detail"/>
        <dropColumn tableName="menu_detail" columnName="id"/>
        <rollback/>
    </changeSet>

    <changeSet id="add_BLOB_column_to_Employee" author="Sasha">
        <addColumn tableName="employee">
            <column name="photo" type="BLOB"
                    valueBlobFile="89504E470D0A1A0A0000000D49484452000000A0000000A00803000000BC11971F00000030504C5445D4D4D4FFFFFFFAFAFAD7D7D7D1D1D1DEDEDED8D8D8EDEDEDF4F4F4E9E9E9F1F1F1DBDBDBF9F9F9E5E5E5E1E1E1F0F0F0A54801F8000003B949444154789CED9CD912A4200C451502A8B8FCFFDF4E5B8EBD2AB2DC8035C379EBB75B912C24A19BA652A9542A954AA552A9542A954AA5384424B5B54A59ABE5E347693D1F3CE4CCFD328A27E3D2CFCD6D446A65447B80304A97D6D6909CCD78A46E6334B32C6947925377AE6EA39BCA49A4C961BC37334E8514CE8727EFF034CEF9D5915A7CE5AD2C2AB715276FF3FD35E294579F0993B76232CAB35ECEF1CD6873E953819F7747A83CFAFCBDF74761166F8ED7974521CDF1F25666EE7063D3F4B52DB3A7E8CBDC7B45C75BE104A58F63164E7D7DBABEB6EDF9F42984BEB6650B871495407E19993C99268CBEB6652A106D4284FE44F0C49A880AE60C96CA26B6443882A56C8084981D8650939CE33E819F42821AF06142B42313F004AE08B440F017867F6302C6980D03362128CBBD18B1FA904170031B0A7169F8053621030AD56FA0856B7AA5FF0BB4F68F6B25B881361AF03E02F612061F7978C9FF24105C296C204BAEDB0B8467E21564DD5F05FEF3026FEF24B71778FB409DD8F73D06D9AFBE7DB16039EA41E8BD6EC00B1C90FAF0B74EF4BD93C14BB0331D8DBF7662C71104F7920EDC5980876AF8801B2D10AD8FC081668037FA41439C1D7C935A42DDA49370815837E1D801419A90C3805013322DD1C04CD8F1E86B244A20CB076E70B312F88CE4898444EB81CB800DA691C9BA2145E99713C1BBA897DEEEE75EC74C2DFED103A65F649242C3E8204F12820DE3CA0C4461267DD10AB3E98BDB21CCBAAB4C327878B7645E48A73EC888822FFF9EA20212F39069BDF613E97B12C59C23FA1D41B3470DDBB1AFAD9EEBD3EAFA248A5EE9220A494FA6F3FAC6A23353768D6497302F5E6C4E89D6EFA5CB27E3946B97DFE3E09D98B1CF106D48B91E595D5AD1303F7C2179FC422DC08A8633E569CC1E35DB2EBA4F58F6A1E3A96B2C72C916EFD0A4A0BB3D23DA59D2AE4A4760AF4F8A6356870B8A9E4F2443813DA9E4581EDCC028C41FBF178883A81926B12F86F4A0CDE01EEF24778359EDB79236D7E6580DFD26655514D3F2BD22BE254C0CBBBF472C91D106FD00E29CC8B6035B7CFE256AF294F20A369498CE9766C9BF678CC1AE8C9EB05F113C81CF780037028F21C736999BB05D33ECFCDF8FA02177F60FBC12F09171AF3843F07FF199DB8377BC3D19BC22E38FAF9F14F0900DCFEAB588876C78F9498910B3E3156A0A1AD0CB84250DE86542969D6E7F2EEB2EFC2E6818979BA3B0EDA2582EBE71BE7BC81917F71359240BBF23DC262C1A6336DC9126D34DD885F3D56C8E56C715CE5648E120B8E10A85C57D78C5B1BD5236CDED38D21DFCCF14E2F828FDFF00C82B38D5BF196A320000000049454E44AE426082"/>
        </addColumn>

        <rollback/>
    </changeSet>

    <changeSet id="add_BLOB_column_to_Dish" author="Sasha">
        <addColumn tableName="dish">
            <column name="photo" type="BLOB"
                    valueBlobFile="FFD8FFE000104A46494600010100000100010000FFDB00840009060712121212131313131610151810131313151518151315181716181717181515181D2820181A251B131721312125292B2E2E2E171F3338332D37282D2E2B010A0A0A0D0D050E0F0F0E2B1913192B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2B2BFFC000110800E100E103012200021101031101FFC4001B00010002030101000000000000000000000005060203040107FFC4003F100002010203040801090704030000000000010203110412210531415106132232617191B181142342526282A1C1D11524333472E1F092B2D2F15373C2FFC40014010100000000000000000000000000000000FFC40014110100000000000000000000000000000000FFDA000C03010002110311003F00FB88000000000000000000000000000000000000000000000000000000000000000000000001A31B8A8D2839CAF955AF6577A9BC8BE92FF2F3FBBEE80E8FDA34FAAEBB5C96BEED77DB71BB09898D4829C6F95EEBE8CAB51938E16A537C610AB1F272B497AFB9D51DA12A383A4E36CCEE937AA5AB6C0B282BD84DA15E15A14EAB8C95449A696AAFBB7161023B1FB6A9519649E6BD93D15D6BFF0047B80DB14AB3CB06F3726ACDF910DB5EB4618D84A7DD518B7A5F84B81E52A91AF8C84E926A11B372B593B6FF007B013D81DA30AAE6A17BC347756E7BBD0EC297809D65F28749C528BCD26F7E8DE8BF1F425A96D99FC91D5693A89E45C9BBEF7F00278E778DA6A7D5E65D67D5E3BAE4051DA988A72A2EA38CA9D6B3492D5276FF009234E3A155E36D1925376CAEDA259773D39016D04063F1F5A55DD1A2E31CAAEDBE2ED7FCD1D3D1EDA32AD0929DB3C1A4DAE37DDECC0960000000000000000000000000000000022FA4DFCBCFEEFBA250C6A535256924D726AE80AA6328BF9251A8B845C25FD3277F748C71D4DBC0D16B726EFF001BA2D9D4C72E5CAB2FD5B69E81528A595259795B4F402AD2AF1AF89C3BA7AA8A866D37657765B0D74A8423DD8C579248D8056B68453C7D24ECD5A3A3F291638534B7249782B18BA317252715996E95B5F5360152D93DCC6F93FF00E8C695372C04ADC2777E575FA96A8E1E0AF68C566EF68B5F3E6654E9462AD18A4B92564053EB578D5F91C20EF2828C65A6E7D8FF008B3AF1F5E34F1CA52768A51D6DF65A2C74F0F08BBC6314F9A4933DAB4212EF462DF8A4C0ADD6AD1A38D94E7A45C5B4F7EF56F746FE8841E5AB2E1292B7C2F7F7276AD18CBBD14FCD266708A4AC924B92DC07A0000000000000000000000000000000001CBB52B64A5525CA2EDE6F45F8B02BB4B6D55EB9372F9973715A2B5AFF00DD1659E2E0A6A9B92537BA3C5FF9628F56AC3A8A693F9D539C9AD74BEE77FBABD49ADB153B785AEB73CB77F8FE6C09E58BA79DC332CEB571E291AE1B4E8B79554866E5720F05055278C9CA5961DA8665BD2BBDDF0488AC7757D5C7AAA72CB195BAE969293D5E5D3FCD10169DB55671C996AC29DDBBE6FA5E5A1CDB731D529D5A118CACA4D66D16BDA8AFCCE4E943BD3C3B7BFF00B232E927F1B0BE6BFDD1027B138CA74ED9E718DF75D9952C44671BC249AE69DC81DB2A8AAE9C94AAD56928D1D1C77595F97335F452EA55D6EFB3C13BB406FD87B5AF1A92AD5159494637B2E0F91BFA478E953A509D395AF24AEACEE9C64FF24416030D0950C4C9A4E51B657CBC8D98C77C050FFD925E9D601695898C69C653925751BB7A5DD8CF0D8B854BB8494ADBECCACF4824F361959C9658BC8BE96ED0DDB168CD6265254674E9C93D1A7956EF0E60598000000000000000000000000000000008EDBB85A95696485AEDABDDDB45F0244011388D909E1FAB518759962B35ADDA56E3639EAEC9AB2C2C693CBD641A71D74B5F9DB93278010D81D932587A94E6D29CF336D6AB5DC47D5D8B8974634BE6F2C25292D5DDDEFE1E2CB4802136D6CBA95614631CB7877AEEDC12D34F032DB1B36A55A94651CB68359AEEDC53D34F0264010B8DD9B57E50ABD3C8F4B3526D5B4B70479B0F6654A52AAE797B7BACF8DDBE5A6F26C0157A1B1F131A7560BABB546AF793BA5CD687563B62CDE1A9D1834E519666DBB2D54AF6F8C89E00436D3D933A8A94A0D2AB4D456BB9DADC7CD196CAC0D6552552B4EEDEE8C5BCABE1B8970000000000000000000000000000000000000000000119B636C46824AD9A6F551E1E6D959C76DDAD5538DD462F8477FC5816FAFB468C34954827CAEAFE869FDB787FFC9128400FA1436A507BAAD3FF00523A61513DCD3F2773E68654E6E3AA6D3F07603E960A161F6DD786EA8DAE52D57E3A93980E93C5E9522D7394758FC7901610634E6A4934D34F54D6E6640000000000000000000000000000000000038313B66842E9CD36B847B4FF00003AB15898D38B94DDA2B8EFF621EA74A68A7A466D73DDEE476D8DBEAA28AA6A7169DF35EDC1AB588BFDA3539AF3CAAFEB603B31728E26A39C5CD376DF1EC4525C649E8449BAB62E72D2526D72BE9E86800000077EC89D0526EB26D5BB292BABF89C000B753DB7848F7616F2858CA3D23A726A30A72727A25A2BB29E7B1935AAD1AD53E407D130749C53CD64E4DCACB746F6D17A5FE2741CF80C47594E13E6937E7C4E8000000000000000000000000000000000297B776C4EA4E518B6A9ABAB2D335B7B7FA10C6DC4C6D39AE5297B9A800B826B606D5852BC671566EF9D2BC9783E6808854A5BF2BB7931286975DD7C7C7932E8B69516DB769A7AC5AB3B2E4D3D62C82C74E139E58D939E6CDC6D6D609BDD9B7FA810A01BF0D47336DE908ACD27E1C978BDC069CBA5F81E1B2B54CCEFB96E4B92E46B00012FB13633ADDA9DE34971DCE5E5FA8186CAC6E255A149B9257ECDAF15E7CBD4B4E0ABE21DBACA515CDA96BFE9FEE477ED06DF538482B2DF3B76578F8F9B34D5AB4E0FE7B13527538C69B6A2BD00B3821F66ED0A32D29CAA36B5C926DB6B9ABEFF00812B4AAA924E2EE98198000000000000000000000000000F9DED25F3B57FAE7EE731D7B597CF55FEA97B9C8000000EAC0C2CF3BD211BBBF0BF04B9BB9CA74E3DF6947846314BE2AEFF00160731DF8A5928D38719FCECBCB7417BBF89C3157D39E848EDFD2B38F08C6115F08A0234000766CAC0BAD51416EDF27C92DE4E6D4ACEA4A384A1A45594DADCADC3C971F11B192A1869D67DE9276F68AF53560A5D461A75DFF16AB6A2F8EB7FD1B037E231587A29504E765DF70B26DFDA97E8618AE8FD39D3EB2837AACC937752F0F06565BF52E3D12A8DD16B949A5EFF00981508CA50926AEA517E4D345B3078CB4A9D45A53AFD992E11A8B8FC4AFEDD82588AA96EBA7EA937EE7461EA7EE73E74EA4251F0BDBFB817606BA13BC62F9A4FD51B00000000000000000000000000A16DD5F3F53CFF00223C92E90AFDE2A79AF644680000037E33BEFEEFB2341BF19DF7F77D901AE8BED47CD7B921D225FBC4FC72BF5488D25F6FC732A3556E9C229BFB4B7DFF00CE00439E9E1953DEBCD7B8166E90ACB428525F4B2AF44BF367274A2A59D3A4BBB08A76F17A7B22436F2BD5C25FBB997ADE04574AA2D621F2718D80872EFD18A396845FD66E5FA153D9B819569A8ADDBE4F8245CB69626387A3A5AE96582F1B597EA053F6CD5CD5EABFB4D7A69F91D1434C1D5FB552115E36B322DBE24FFC9BF96C3FD2BF5B53C2FAEBE36405A308AD087F4C7D8DA100000000000000000000000000293D28A2E35E4DEE928B4FE167EC4417FC6E1A1553854575C1FD25E4CAC6D1D815217943B74FC3BCBCD010E0F5A3C006FC6AEDBFBBFED4682D54760D39DAA4E5279A31795696ECADEC0AA964D91859D5A12A3521251EF539B56B3FCF7FB93187C253A7DC8453E6F57EA6D936F7814AC76CCAB47BF1D3EB2D63EA719F424DEEDEB93D511B8CD8546A6B1BD3978777D00D3B61E7C3D0ACBE8384BDAFF8A461B63154FAC4AB41CA94A2A74E51D24AEB55E2BF53AF65E16708CA8558A95277C925AAB3DE9F2E68D73D9CA71F93D4D270BBA353EB47978BE6BC2E06BA5B770D4636A509795AD7F36D901B4B684EB4B349E8AF962B745781D757A3F593B763CF3A5F83D4CE9ECFA34B5AD514A7C2953D5B7C9B4069D93858ABD6ABFC286EFB72E115CC9BD874A4DCB1153BF51F61728FF9A7C0C28E06759C655A392847F874569EA8969EBE0B82E407620791DC8F40000000000000000000000000E7A9BD9E27636496A796038F17B3E955EFC15FEB2D1FA91588E8BC5EB0A965CA4AFF008A7F9161B0B015CC3F4635EDD45956F515ABF8F02C165A24AC92492F04662C06B06CB003583600304D8924D59ABF1D783E68CEC00D7563196928A6BC55CC28E1E9C3B94E117E115737D80183612333282D40D8800000000000000000000000000062E232190031C832190031C832190031C832190031C832190031C832190031C832190030C86491E8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003FFD9"/>
        </addColumn>

        <rollback/>
    </changeSet>


</databaseChangeLog>